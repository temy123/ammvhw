<!DOCTYPE html>
<html lang="ko" dir="ltr">

<head>
    <title>StudioUniversal TV</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- CDNBye Plugin -->
    <script src="https://player-js.studiouniversal.net/hls.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/cdnbye@latest/dist/jwplayer.provider.hls.js"></script>
    <script src="https://ssl.p.jwpcdn.com/player/v/8.21.2/jwplayer.js"></script>
    <link href="/theme/assets/css/player.css?v=15" rel="stylesheet" />

    <link href="https://vjs.zencdn.net/7.17.0/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.17.0/video.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>
</head>

<body>

    <div class="container" style="min-height: 600px; min-width: 800px;">

        <video id=example-video width=600 height=300 class="video-js vjs-default-skin" controls>
            <!-- <source
               src="https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8"
               type="application/x-mpegURL"> -->
          </video>


<!-- 





    파이썬 부분에서 해당 m3u8 주소를 
    referer 와 origin 을 바꿔서 다시 이쪽으로 넘겨주도록 수정 필요!
    






 -->


        <script>
            var player = videojs('example-video');

            videojs.Hls.xhr.beforeRequest = function(options) {
                if (options.headers == undefined) {
                    options.headers = {}
                }
                options.headers["origin"] = "https://player2.studiouniversal.net"
                options.headers["referer"] = "https://player2.studiouniversal.net/"

                return options;
            };

            player.src({
                src: 'https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8',
                type: 'application/x-mpegURL',
                withCredentials: true
            });

            player.play();
        </script>


    </div>

    <div id="jw_player"></div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            jwplayer.key = "uoW6qHjBL3KNudxKVnwa3rt5LlTakbko9e6aQ6VUyKQ=";
            window.disableP2pEngineIOSAutoInit = true;
            const playerInstance = jwplayer("jw_player").setup({
                playlist: [{
                    sources: [{
                        "default": false,
                        "file": "https://cdn2.studiouniversal.net/video/45N6gBZrEo5WodECSRd01hmIWhroQKm0tTghDmop/studiouniversal.m3u8",
                        "type": "hls",
                        "preload": "none",
                    }],
                    image: "https://img2.studiouniversal.net/api/v1/play/thumbnail/41092",
                }],
                "primary": "html5",
                "hlshtml": true,
                "cast": {},


                hlsjsConfig: {
                    maxBufferSize: 0,
                    maxBufferLength: 10,
                    liveSyncDurationCount: 10,
                    p2pConfig: {
                        showSlogan: false,
                        live: true, // set to false in VOD mode
                        announceLocation: "hk",
                        useHttpRange: true,
                    }
                },

                "logo": {
                    "file": "/uploads/",
                    "link": "#",
                    "hide": "false",
                    "position": "top-left"
                },
                playbackRateControls: true,
                playbackRates: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2, 3],
                skin: {
                    controlbar: {
                        "icons": "rgba(255,255,255,1.0)",
                        "iconsActive": "#ff0000"
                    },
                    timeslider: {
                        "progress": "#ff0000",
                    }
                },
            });
            playerInstance.on("firstFrame", () => {});
        });

        function toggle_visibility() {
            var e = document.getElementById("servers");
            if (e.style.display == "block")
                e.style.display = "none";
            else
                e.style.display = "block";
        }
    </script>
</body>

</html>